<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApplyTracker</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="form.css">
    <link rel="stylesheet" href="bottom-nav.css">
    <link rel="stylesheet" href="custom.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="delModal.css">
    <link rel="stylesheet" href="customScroll.css">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="logoutModal.css">
    <!-- on scroll animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
    <!--  -->
  
    <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css" />
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
    <!-- link for an icon -->
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!--  -->
    <!-- edit icon -->
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!--  -->
  
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  
      <link type="image/png" sizes="16x16" rel="icon" href="images/icons8-apply-16.png">
  </head>
  
  <body>
  
  
    <nav>
      <ul>
        <li><a href="#" style="display:flexbox;" class="logoname"><img src="images/smile2.png"
              style="margin-bottom: -9px;">Apply
          </a>

        </li>

       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li> 
       <li></li>
       <li></li>
        <li> <span class="material-symbols-outlined">
          notifications_active
          </span>
          <li><span class="material-symbols-outlined">
            account_circle
            </span></li>
        </li>
     

        <li style="cursor: pointer;" class="sun">
          <span class="material-symbols-outlined"  id="mode-toggle">
            dark_mode
            </span>
          
      </ul>
    </nav>
    <div id="progress-bar"></div>


    <div id="logout_Modal">
      <div class="logoutModal">
          <h2>Logout</h2>
          <div class="h3">Are you sure you want to logout?</div>
          <div class="yes-no-btn">
            <button type="button" class="yes" id="logout">Yes</button>


              <button type="button" class="no" onclick="closeModal('logout_Modal');">Close</button>
          </div>
      </div>
  </div>


    <section id="display">
      <h1 id="headline"><img src="images/smile2.png" alt="">  <li><span id="username-display"></span></li></h1>
     
      <div class="div1">
        <ul>
          <li class="search-bar"><input type="text" placeholder="Search..."></li>
          <li class="sort-by">
            <select>
              <option value="" disabled selected>Sort By</option>
              <option value="all">All</option>
              <option value="applied">Applied</option>
              <option value="recent">Recent</option>
              <option value="oldest">Oldest</option>
  
  
            </select>
          </li>
        </ul>
      </div>
  
      <table id="applicationsTable">
        <thead>
          <tr>
            <th onclick="sortBy('sno')">S.No</th>
            <th onclick="sortBy('company')">Company Name</th>
            <th onclick="sortBy('position')">Position</th>
            <th onclick="sortBy('date')">Apply Date</th>
            <th onclick="sortBy('status')">Status</th>
            <th>Link</th>
            <th>Notes</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Table body rows will be added dynamically -->
        </tbody>
      </table>
  
  
  
      <div class="end" style="display: flex; justify-content:space-between">
        <button id="addNew" type="button" onclick="display :'none'">+Add New</button>
        <button id="closeFormButton" type="button" class="close-button">&times;</button>
  
      </div>
  
  
  
      <div class="formSection">
        <h3 id="changeTextToEdit">New Application</h3>
        <form id="applicationForm">
          <label for="companyName">Company Name:</label>
          <input type="text" id="companyName" name="companyName" required>
  
          <label for="position">Position:</label>
          <input type="text" id="position" name="position" required>
  
          <label for="applyDate">Apply Date:</label>
          <input type="date" id="applyDate" name="applyDate" required>
  
          <label for="status">Status:</label>
          <select id="status" name="status" required>
            <option value="">Select Status</option>
            <option value="Applied">Applied</option>
            <option value="Interested">Interested</option>
            <option value="Interviewing">Interviewing</option>
            <option value="Offered">Offered</option>
            <option value="Rejected">Rejected</option>
  
          </select>
          <label for="link">Link:</label>
          <input type="url" id="link" name="link" pattern="https?://.+">
  
  
          <label for="notes">Notes:</label>
          <textarea id="notes" name="notes" rows="4" required></textarea>
          <div class="SaveClose">
            <button type="button" id="save" clsonclick="addApplication()">Save</button>
  
          </div>
  
        </form>
  
  
      
    </section>

    
  
  
  
  
    <div class="bottom-nav" id="bottom-nav">
      <ul>
        <li class="copyright">
          
          <div id="loginSection">
            <div class="tooltip" id="login_Modal"><span class="material-symbols-outlined">
              logout
          </span>
          <span class="tooltiptext">Logout</span>
  
          </div>
         </div>
          </a>
        </li>
        
      
        <div class="copyright"><img src="images/heart.png" alt="">@snp 2024</div>

        <!-- logout modal start-->


                <!-- logout modal end-->
  
        <!-- model  -->
        <div id="myModal" class="modal">
  
          <div class="modal-content">
            <h2>Edit Your Details</h2>
            <span class="close">&times;</span>
            <div>
              <input type="text" id="nameInput" placeholder="Edit you name">
              <input type="text" id="linkedin_link" placeholder="Linkedin link">
              <input type="text" id="nameInput" placeholder="Github link">
            </div>
            <button id="saveBtn" onclick="saveName()">Save</button>
            <br>
          <br>
          <span>----------Developer <img src="images/heart.png"> Contact----------</span>
          <br>
          <br>
          <li>
            <a href="https://www.linkedin.com/in/shraddha-nand-pandey/" id="linkedin"> <i
                class="devicon-linkedin-plain"></i></a>

            <a href="https://github.com/ShraddhaNandPandey" id="github"> <i class="devicon-github-original"></i>
            </a>
          </li>
          </div>
        </div>
        <!--  -->
  
        <div id="delete_modal">
  
  
  
          <div class="del_modal">
  
            <h2>Delete</h2>
  
            <div class="h3">Are you sure you want to delete this?</div>
            </li>
  
            <div class="yes-no-btn">
              <li> <button type="button" class="yes" onclick="confirmDelete();">Yes</button>
                <button type="button" class="no" onclick="closeModal('delete_modal');">Close</button>
              </li>
  
            </div>
  
          </div>
  
        </div>
  
        <li><span class="material-symbols-outlined" id="settings" class="settings" onclick="openM()">
            settings
          </span></li>
      </ul>
    </div>
  
    
  
  
  
  
  <!-- Modal Login -->
  <div id="loginModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <!-- Close button -->
      <span class="close">&times;</span>
      <!-- Form -->
      <form id="login-form" class="login-form" action="#" method="POST">
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="password" name="password" class="form-control" placeholder="Enter your password" required>
        </div>
        <div class="form-group">
          <button type="button" id="login" class="btn btn-success">Login</button>
          <p>Don't have an account? <a href="signup.html">Register</a></p>
        </div>
      </form>
    </div>
  </div>
  

  <!-- JavaScript to handle modal functionality -->
  
  <script src="login.js" type="module"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
            apiKey: "AIzaSyAA54vudpO9eP3UCNd7Ehe1iltA7AP1TbA",
            authDomain: "jobapplytracker.firebaseapp.com",
            projectId: "jobapplytracker",
            storageBucket: "jobapplytracker.appspot.com",
            messagingSenderId: "648058361738",
            appId: "1:648058361738:web:2b924b5e5d239beda01a73",
            measurementId: "G-23H7FST4KJ"
  };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    
  

    function checkAuthAndRedirect() {
  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      // User is signed in, redirect to another page
      window.location.href = 'dashboard.html';
    }
  });
}

    document.getElementById("logout").addEventListener("click", function() {
    auth.signOut().then(() => {
        // Sign-out successful.
        console.log('Sign-out successful.');
        alert('Sign-out successful.');

        // Redirect to index.html after logging out
        window.location.href = 'index.html';

        // Replace the current URL in the browser's history with the new URL
        history.replaceState(null, null, 'index.html');
    }).catch((error) => {
        // An error happened.
        console.log('An error happened.');
    });
});


  
  function checkAuth() {
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            // User is signed in
            if (window.location.pathname.includes("index.html")) {
                // Redirect to dashboard.html if the user is signed in and accessing index.html
                window.location.href = 'dashboard.html';
        history.replaceState(null, null, 'dashboard.html');

            }
        } else {
            // User is not signed in
            if (window.location.pathname.includes("dashboard.html")) {
                // Redirect to index.html if the user is not signed in and accessing dashboard.html
                window.location.href = 'index.html';
              history.replaceState(null, null, 'index.html');

            }
        }
    });
}

function fetchAndDisplayUsername() {
            const usernameDisplay = document.getElementById("username-display");
            const headline = document.getElementById("headline");

            // Check if a user is signed in
            const user = auth.currentUser;
            if (user) {
                // Get the display name of the user
                const username = user.displayName;

                // Update the HTML elements with the username
                if (username) {
                    usernameDisplay.textContent = "Welcome, " + username;
                    headline.textContent = "Welcome, " + username;
                } else {
                    // If the user's display name is not set, display a default message
                    usernameDisplay.textContent = "Welcome, User";
                    headline.textContent = "Welcome, User";
                }
            } else {
                // If no user is signed in, display a default message
                usernameDisplay.textContent = "Welcome, Guest";
                headline.textContent = "Welcome, Guest";
            }
        }

        // Call the function to fetch and display the username when the page loads
        fetchAndDisplayUsername();

        // Listen for authentication state changes
        auth.onAuthStateChanged(user => {
            fetchAndDisplayUsername(); // Update the username display when authentication state changes
        });

//storing table data start

//storing table data end

// Call the function to check authentication status
checkAuth();
checkAuthAndRedirect();





  </script>

    <script src="background.js"></script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-analytics.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
   
      const analytics = getAnalytics(app);
    </script>
  <script src="login.js"></script>
  <script>
    // Function to display the logout modal
    
// Function to confirm logout
// Function to confirm logout and redirect to index.html



  </script>

  

<script>
  
  // Function to display the logout modal
  function openModal(modalId) {
      var modal = document.getElementById(modalId);
      modal.style.display = "block";
  }

  // Function to close the modal
  function closeModal(modalId) {
      var modal = document.getElementById(modalId);
      modal.style.display = "none";
  }

  // Function to handle the click event on login section and open the logout modal
  document.getElementById("loginSection").addEventListener("click", function() {
      openModal("logout_Modal");
  });
 
</script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="javascript/api.js"></script>

</body>
</html>
